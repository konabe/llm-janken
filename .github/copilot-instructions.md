# AI コーディングエージェント向け Copilot 指示書

このプロジェクトは LLM を活用したじゃんけん（rock-paper-scissors）ゲームです。このコードベースで生産的に作業するため、以下のガイドラインに従ってください：

- **プロジェクトの目的:** AI 対戦相手と競う戦略的じゃんけんゲーム
- **アーキテクチャ概要:**
  - **ゲームエンジン** (`src/game/`): コアじゃんけんロジック、ルール、ゲーム状態管理
  - **LLM 統合** (`src/ai/`): AI プレイヤー戦略、プロンプトエンジニアリング、LLM API 連携
  - **UI レイヤー** (`src/ui/`): ユーザーインターフェース（CLI ファースト、Web 拡張可能）
- **主要機能:**
  - **AI 戦略システム**: 各 AI 対戦相手は手の生成のための共通インターフェースを実装
  - **心理戦システム**: AIがじゃんけんの前に心理戦を持ち掛ける言葉をユーザーに提示する
  - **LLM プロンプト設計**: 明確で簡潔なプロンプトテンプレートを作成
  - **多言語サポート**: 英語/日本語のじゃんけん用語のための文字列管理を設計
- **実装ガイドライン:**
  - AI の意思決定から分離された決定論的ゲームロジックを優先
  - AI 決定パターンのデバッグのための包括的ログを含める
  - 同期 CLI と潜在的な非同期 Web ゲームプレイの両方を計画

_This file should be updated as the project develops to reflect architecture, workflows, and conventions._

## � 開発環境の必須要件

### Python仮想環境（venv）の使用必須
- **すべての開発作業前に仮想環境をアクティベートすること**
- Windows: `.venv\Scripts\Activate.ps1` を実行
- プロンプトに `(.venv)` が表示されることを必ず確認
- `openai` パッケージなどの依存関係は仮想環境内にインストール済み

### トラブルシューティングの基本
- パッケージが見つからない → 仮想環境がアクティブか確認
- Pythonコマンドエラー → 仮想環境の再アクティベート
- 詳細は `docs/dev-setup.md` を参照

## �📋 重要リファレンス

- **[開発環境セットアップ](../docs/dev-setup.md)**: 仮想環境の詳細な設定方法とトラブルシューティング
- **[コーディングルール](./coding-rules.md)**: 詳細なPythonコーディング規約、テスト規約、Git規約
- **開発フロー**: テスト駆動開発を基本とし、品質チェック→コミット→プッシュの流れを徹底

# 開発の進め方

## 🔧 開発前チェックリスト（必須）
1. **仮想環境のアクティベート**: `.venv\Scripts\Activate.ps1` 実行
2. **プロンプト確認**: `(.venv)` が表示されているか
3. **依存関係確認**: `pip list` でopenaiパッケージが表示されるか

## 📝 開発作業フロー
- 指示に従って、テストコードを含めてコーディングをしてください。
- コーディングが終了したら、Problems タブを確認し、警告やエラーがないことを確認してください。
- テストを実行してください：`python -m unittest discover tests -v`
- テストが成功したら、コミットしてください。
  - コミットメッセージはプレフィックスを含めてください。
    - 例: `feat: 新しい AI 戦略を追加`, `fix: バグ修正`, `docs: ドキュメント更新`
- テストが失敗したら、テストが成功するまで修正してください。
- 変更をプッシュしてください。

## ⚠️ よくあるエラーとその対処
- **「openaiパッケージが見つからない」**: 仮想環境を確認・再アクティベート
- **「Pythonコマンドが見つからない」**: 仮想環境の再アクティベート
- **実行ポリシーエラー**: `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`