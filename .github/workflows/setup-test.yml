name: Environment Setup Test

# é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ãƒ†ã‚¹ãƒˆï¼ˆæ–°ã—ã„é–‹ç™ºè€…å‘ã‘ï¼‰
on:
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã®ã¿
  schedule:
    - cron: "0 0 * * 1" # æ¯é€±æœˆæ›œæ—¥ã«å®Ÿè¡Œ

jobs:
  setup-test:
    name: ğŸ”§ Test Dev Environment Setup
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ§ Test bash environment
        run: |
          echo "Testing bash environment compatibility..."
          bash --version

      - name: ğŸ Setup Python environment
        uses: actions/setup-python@v4
        with:
          python-version: "3.12"

      - name: ğŸ”§ Test virtual environment creation
        run: |
          echo "Testing virtual environment setup..."
          python -m venv .venv
          source .venv/bin/activate
          echo "Virtual environment activated: $VIRTUAL_ENV"

      - name: ğŸ“¦ Test dependency installation
        run: |
          source .venv/bin/activate
          pip install --upgrade pip
          pip install -r requirements.txt
          pip list

      - name: ğŸ§ª Test complete workflow
        run: |
          source .venv/bin/activate
          echo "Running complete test suite..."
          pytest tests -v

      - name: ğŸ® Test application
        run: |
          source .venv/bin/activate
          echo "Testing application startup..."
          timeout 10s python main.py <<< "quit" || true

      - name: ğŸ“‹ Generate setup report
        run: |
          echo "================================="
          echo "ğŸ¯ Environment Setup Test Report"
          echo "================================="
          echo "âœ… Bash environment: Ready"
          echo "âœ… Python 3.12: Ready"
          echo "âœ… Virtual environment: Ready"
          echo "âœ… Dependencies: Installed"
          echo "âœ… Tests: All passing"
          echo "âœ… Application: Functional"
          echo "================================="
          echo "ğŸš€ Development environment is ready for new developers!"
